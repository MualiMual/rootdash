<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Dashboard</title>
    <link href="https://vjs.zencdn.net/7.15.4/video-js.css" rel="stylesheet" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <div class="header">
        <div class="header-left">
            <h1>Home Dashboard</h1>
            <div id="ip-address">IP: Loading...</div>
        </div>
        <div id="datetime">Loading time...</div>
    </div>

    <div class="main-container">
        <div class="left-jumbo">
            <!-- Video Feeds Section -->
            <div class="video-feeds">
                <!-- Weather Map -->
                <div class="video-feed weather-map">
                    <iframe src="https://www.rainviewer.com/map.html?loc=42.3223,-83.1763,8&oFa=0&oC=0&oU=0&oCS=1&oF=0&oAP=0&c=1&o=83&lm=1&layer=radar&sm=1&sn=1" allowfullscreen></iframe>
                </div>
                <!-- Video Feed -->
                <div class="video-feed">
                    <img src="{{ url_for('video_feed') }}" alt="Video Feed">
                    <button class="snapshot-button" onclick="takeSnapshot()">Snapshot</button>
					<button class="timelapse-button" onclick="startTimeLapse()">Start Time-Lapse</button>
					<button class="analyze-button" onclick="analyzeImages()">Analyze Images</button>
                </div>
            </div>

            <!-- Sensor Stats Section -->
            <div class="sys-stats">
                <!-- Outside Sensors -->
                <div class="sensor-outside">
                    <div class="widget">
                        <h2>Power</h2>
                        <p id="analog-value">N/A</p>
                    </div>
                    <div class="widget">
                        <h2>Light</h2>
                        <p id="color-red">N/A</p>
                    </div>
                    <div class="widget">
                        <h2>Motion</h2>
                        <p id="accel-x">N/A</p>
                    </div>
                    <div class="widget">
                        <h2>Pressure</h2>
                        <p id="pressure">N/A</p>
                    </div>
                    <div class="widget">
                        <h2>Temp</h2>
                        <p id="temperature-sht">N/A</p>
                    </div>
                </div>

                <!-- Inside Sensors -->
                <div class="sensor-inside">
                    <div class="widget">
                        <h5>CPU</h5>
                        <p id="cpu-usage">N/A</p>
                    </div>
                    <div class="widget">
                        <h5>RAM</h5>
                        <p id="ram-usage">N/A</p>
                    </div>
                    <div class="widget">
                        <h5>DRIVE</h5>
                        <p id="storage-usage">N/A</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Jumbo Container -->
        <div class="right-jumbo">
            <div class="four-box-layout">
                <!-- Boxes for insights, detections, growth rate, etc. -->
                <div class="box" id="detection-insights-box">
                    <h3>Detection Insights</h3>
                    <div id="detection-insights">
                        <p>Loading detection insights...</p>
                    </div>
                </div>
                <div class="box">
                    <h3>Last 5 Detections</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Category</th>
                                <th>Label</th>
                                <th>Confidence</th>
                            </tr>
                        </thead>
                        <tbody id="detections-table-body">
                            <tr>
                                <td colspan="3">Loading detections...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="box">
                    <h3>Growth Rate</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Plant</th>
                                <th>Rate</th>
                                <th>Height</th>
                                <th>Planted</th>
                            </tr>
                        </thead>
                        <tbody id="growth-rate-table-body">
                            <tr>
                                <td colspan="4">Loading growth rate data...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="box">
                    <h3>Growth Graph</h3>
                    <img id="growth-graph" src="https://via.placeholder.com/400x200?text=Loading+Graph" alt="Growth Graph" style="width: 100%; height: auto;">
                </div>
                <div class="box">
                    <h3>Seasonal Status</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Plant Name</th>
                                <th>Start Date</th>
                                <th>Current Stage (%)</th>
                            </tr>
                        </thead>
                        <tbody id="seasonal-status-table-body">
                            <tr>
                                <td colspan="4">Loading seasonal status...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="box">
                    <h3>Harvest Scheduler</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Plant Name</th>
                                <th>Predicted Harvest Date</th>
                            </tr>
                        </thead>
                        <tbody id="harvest-scheduler-table-body">
                            <tr>
                                <td colspan="2">Loading harvest scheduler...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

	    <!-- Scripts -->
	<script type="module" src="{{ url_for('static', filename='js/analyze.js') }}"></script>
	<script type="module" src="{{ url_for('static', filename='js/timelapse.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='js/routing.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='js/utils.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='js/dataFetch.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='js/dataSensor.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='js/dataGrowth.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='js/dataHarvest.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='js/dataDetection.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='js/snapshot.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='js/main.js') }}"></script>
	<script src="https://vjs.zencdn.net/7.15.4/video.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/videojs-flash@2.2.1/dist/videojs-flash.min.js"></script>
</body>
</html>